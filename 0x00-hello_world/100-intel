#!/bin/bash

# Check if the CFILE variable is set
if [ -z "$CFILE" ]; then
  echo "CFILE variable is not set. Please export CFILE with the name of the C file."
  exit 1
fi

# Extract the filename without the extension
FILENAME="${CFILE%.c}"

# Generate Intel syntax assembly code and save it to a .s file
gcc -S -masm=intel "$CFILE" -o "$FILENAME.s"

# Check if assembly generation was successful
if [ $? -eq 0 ]; then
  echo "Intel syntax assembly code generated and saved to '$FILENAME.s'."
else
  echo "Assembly code generation failed."
fi
